import React from 'react';
import PropTypes from 'prop-types';

import Img from '@pagerland/common/src/components/Img';
import Button from '@pagerland/common/src/components/Button';

import { ImgInner, ImgWrapper, Title, Wrapper, Badge, Overlay } from './styled.components';

const Preview = ({
  ImgProps,
  ImgWrapperProps,
  TitleProps,
  title,
  isNew,
  placeholder,
  actions,
  isComing,
  ...props
}) => (
  <Wrapper {...props}>
    {isNew && <Badge>New</Badge>}
    {isComing && <Badge bg="secondary">Soon</Badge>}
    <ImgWrapper disabled={isComing} placeholder={placeholder} {...ImgWrapperProps}>
      {placeholder ? (
        <svg
          width="205"
          height="30"
          viewBox="0 0 205 30"
          fill="none"
          xmlns="http://www.w3.org/2000/svg"
        >
          <path
            d="M6.39813 6.912C4.84079 8.512 4.06213 10.3893 4.06213 12.544C4.06213 14.6987 4.85146 16.544 6.43013 18.08C8.03013 19.5947 9.87546 20.352 11.9661 20.352C14.0568 20.352 15.8381 19.7653 17.3101 18.592C17.6728 18.3147 18.1101 18.208 18.6221 18.272C19.1341 18.336 19.5501 18.56 19.8701 18.944C20.1688 19.3493 20.2861 19.808 20.2221 20.32C20.1581 20.8107 19.9341 21.2053 19.5501 21.504C17.4168 23.168 14.9528 24 12.1581 24C8.95813 24 6.20613 22.88 3.90213 20.64C1.59813 18.3787 0.435458 15.6587 0.414125 12.48C0.435458 9.32267 1.59813 6.624 3.90213 4.384C6.20613 2.12267 8.95813 0.981332 12.1581 0.959999C14.9528 0.959999 17.4168 1.792 19.5501 3.456C19.9341 3.776 20.1581 4.18133 20.2221 4.672C20.2861 5.16267 20.1581 5.61067 19.8381 6.016C19.5395 6.42133 19.1341 6.656 18.6221 6.72C18.1101 6.784 17.6728 6.66667 17.3101 6.368C15.8808 5.19467 14.1101 4.608 11.9981 4.608C9.90746 4.608 8.04079 5.376 6.39813 6.912ZM38.0616 21.664C36.6536 23.2853 34.8723 24.096 32.7176 24.096C30.563 24.096 28.739 23.3067 27.2456 21.728C25.7523 20.1493 25.0056 18.2613 25.0056 16.064C25.0056 13.8667 25.7523 11.9787 27.2456 10.4C28.7603 8.8 30.5736 8 32.6856 8C34.7976 8 36.5896 8.81067 38.0616 10.432C39.555 12.032 40.3016 13.9413 40.3016 16.16C40.3016 18.3787 39.555 20.2133 38.0616 21.664ZM29.6456 12.704C28.8776 13.6 28.4936 14.7093 28.4936 16.032C28.4936 17.3547 28.8776 18.4853 29.6456 19.424C30.4776 20.2133 31.4803 20.608 32.6536 20.608C33.827 20.608 34.8296 20.2133 35.6616 19.424C36.4936 18.4853 36.9096 17.3547 36.9096 16.032C36.9096 14.7093 36.4936 13.6 35.6616 12.704C34.7443 11.8933 33.7416 11.488 32.6536 11.488C31.5656 11.488 30.563 11.8933 29.6456 12.704ZM47.4376 24L47.1176 23.968C46.7123 23.8613 46.3816 23.6587 46.1256 23.36C45.8696 23.0613 45.7416 22.7093 45.7416 22.304V9.728C45.7416 9.23733 45.9016 8.832 46.2216 8.512C46.563 8.17067 46.9683 8 47.4376 8C48.1843 8 48.6963 8.32 48.9736 8.96C50.0616 8.32 51.203 8 52.3976 8C54.4456 8 56.1203 8.736 57.4216 10.208C58.6803 8.736 60.291 8 62.2536 8C64.2163 8 65.8483 8.66133 67.1496 9.984C68.451 11.2853 69.1016 12.864 69.1016 14.72V22.304C69.1016 22.7733 68.931 23.1787 68.5896 23.52C68.2696 23.84 67.875 24 67.4056 24C66.9363 24 66.531 23.84 66.1896 23.52C65.8483 23.1787 65.6776 22.7733 65.6776 22.304V14.72C65.6776 13.8027 65.3576 13.024 64.7176 12.384C64.0776 11.744 63.3096 11.424 62.4136 11.424C61.539 11.424 60.7816 11.7333 60.1416 12.352C59.5016 12.9707 59.1603 13.728 59.1176 14.624V22.304C59.1176 22.7733 58.947 23.1787 58.6056 23.52C58.2856 23.84 57.891 24 57.4216 24C56.9736 24 56.5683 23.8293 56.2056 23.488C55.8643 23.1467 55.6936 22.752 55.6936 22.304V14.624C55.6723 13.7493 55.3416 13.0027 54.7016 12.384C54.0616 11.744 53.2936 11.424 52.3976 11.424C51.523 11.424 50.7656 11.744 50.1256 12.384C49.4856 13.024 49.1656 13.8027 49.1656 14.72V22.304L49.1336 22.528V22.624L49.0376 22.816V22.976C48.6963 23.6587 48.163 24 47.4376 24ZM76.6911 8.544C77.0325 8.20267 77.4485 8.032 77.9391 8.032C78.4298 8.032 78.8351 8.20267 79.1551 8.544C79.4965 8.864 79.6671 9.28 79.6671 9.792V22.272C79.6671 22.7627 79.4965 23.1787 79.1551 23.52C78.8351 23.84 78.4298 24 77.9391 24C77.4698 24 77.0645 23.8293 76.7231 23.488C76.3818 23.1467 76.2111 22.7413 76.2111 22.272V9.792C76.2111 9.28 76.3711 8.864 76.6911 8.544ZM79.6671 3.328V4C79.6671 4.49067 79.4965 4.90667 79.1551 5.248C78.8351 5.58933 78.4298 5.76 77.9391 5.76C77.4698 5.76 77.0645 5.58933 76.7231 5.248C76.3818 4.90667 76.2111 4.49067 76.2111 4V3.328C76.2111 2.85867 76.3818 2.45333 76.7231 2.112C77.0645 1.77067 77.4698 1.6 77.9391 1.6C78.4298 1.6 78.8351 1.77067 79.1551 2.112C79.4965 2.432 79.6671 2.83733 79.6671 3.328ZM88.6351 22.304C88.6351 22.7733 88.4538 23.1787 88.0911 23.52C87.7285 23.84 87.3125 24 86.8431 24C86.3951 24 86.0005 23.84 85.6591 23.52C85.3391 23.1787 85.1791 22.7733 85.1791 22.304V9.696C85.1791 9.22667 85.3391 8.832 85.6591 8.512C86.0005 8.17067 86.4058 8 86.8751 8C87.6005 8 88.1231 8.33067 88.4431 8.992C89.4885 8.33067 90.6191 8 91.8351 8C93.6911 8 95.2698 8.66133 96.5711 9.984C97.8725 11.2853 98.5231 12.8427 98.5231 14.656V22.304C98.5231 22.7733 98.3631 23.1787 98.0431 23.52C97.7231 23.84 97.3285 24 96.8591 24C96.4111 24 96.0165 23.84 95.6751 23.52C95.3338 23.1787 95.1631 22.7733 95.1631 22.304V14.656C95.1631 13.76 94.8325 13.0027 94.1711 12.384C93.5311 11.744 92.7525 11.424 91.8351 11.424C90.9391 11.424 90.1818 11.744 89.5631 12.384C88.9445 13.0027 88.6351 13.76 88.6351 14.656V22.304ZM105.988 21.696C104.495 20.16 103.748 18.2933 103.748 16.096C103.748 13.8773 104.495 11.9787 105.988 10.4C107.481 8.8 109.295 8 111.428 8C113.049 8 114.479 8.448 115.716 9.344C115.801 8.96 116.004 8.64 116.324 8.384C116.644 8.128 117.017 8 117.444 8C117.892 8 118.276 8.17067 118.596 8.512C118.937 8.832 119.108 9.22667 119.108 9.696V22.048C119.108 24.16 118.351 25.9627 116.836 27.456C115.343 28.9707 113.54 29.728 111.428 29.728C110.212 29.728 109.092 29.4613 108.068 28.928C107.641 28.736 107.353 28.4053 107.204 27.936C107.055 27.488 107.087 27.0507 107.3 26.624C107.513 26.1973 107.833 25.9093 108.26 25.76C108.708 25.6107 109.156 25.632 109.604 25.824C110.159 26.1227 110.852 26.272 111.684 26.272C112.537 26.272 113.348 25.9413 114.116 25.28C114.905 24.64 115.407 23.8293 115.62 22.848C114.383 23.7013 112.985 24.128 111.428 24.128C109.295 24.128 107.481 23.3173 105.988 21.696ZM107.204 16.096C107.204 17.3547 107.609 18.432 108.42 19.328C109.231 20.224 110.233 20.672 111.428 20.672C112.644 20.672 113.657 20.2347 114.468 19.36C115.279 18.4853 115.684 17.3973 115.684 16.096C115.684 14.7947 115.268 13.696 114.436 12.8C113.625 11.8827 112.633 11.424 111.46 11.424C110.287 11.424 109.284 11.8933 108.452 12.832C107.62 13.7493 107.204 14.8373 107.204 16.096ZM145.411 9.76C145.795 10.016 146.03 10.3787 146.115 10.848C146.222 11.296 146.158 11.7227 145.923 12.128C145.667 12.512 145.304 12.7573 144.835 12.864C144.387 12.9493 143.96 12.8533 143.555 12.576C142.36 11.7867 141.368 11.392 140.579 11.392C139.811 11.392 139.182 11.584 138.691 11.968C138.35 12.2027 138.179 12.416 138.179 12.608C138.179 12.7787 138.2 12.9067 138.243 12.992C138.307 13.0773 138.424 13.1733 138.595 13.28C139.064 13.6 139.843 13.856 140.931 14.048L140.963 14.08H140.995C142.126 14.2933 143.16 14.6133 144.099 15.04C145.038 15.4667 145.731 16.0533 146.179 16.8C146.627 17.5467 146.851 18.2827 146.851 19.008C146.851 20.5013 146.179 21.7387 144.835 22.72C143.598 23.5733 142.211 24 140.675 24C138.691 23.9787 136.792 23.2427 134.979 21.792C134.638 21.5147 134.435 21.1413 134.371 20.672C134.328 20.1813 134.456 19.7653 134.755 19.424C135.032 19.04 135.416 18.8267 135.907 18.784C136.398 18.7413 136.814 18.8693 137.155 19.168C138.307 20.128 139.48 20.5973 140.675 20.576C141.486 20.576 142.211 20.3733 142.851 19.968C143.235 19.648 143.427 19.3813 143.427 19.168C143.427 18.9333 143.395 18.7733 143.331 18.688C143.288 18.5813 143.15 18.4533 142.915 18.304C142.403 17.9413 141.55 17.6427 140.355 17.408H140.323C139.192 17.1947 138.2 16.8853 137.347 16.48C136.515 16.0747 135.843 15.488 135.331 14.72C134.968 14.1227 134.787 13.4507 134.787 12.704C134.787 11.3173 135.416 10.144 136.675 9.184C137.827 8.39467 139.139 8 140.611 8C142.104 8 143.704 8.58667 145.411 9.76ZM163.593 21.664C162.185 23.2853 160.404 24.096 158.249 24.096C156.094 24.096 154.27 23.3067 152.777 21.728C151.284 20.1493 150.537 18.2613 150.537 16.064C150.537 13.8667 151.284 11.9787 152.777 10.4C154.292 8.8 156.105 8 158.217 8C160.329 8 162.121 8.81067 163.593 10.432C165.086 12.032 165.833 13.9413 165.833 16.16C165.833 18.3787 165.086 20.2133 163.593 21.664ZM155.177 12.704C154.409 13.6 154.025 14.7093 154.025 16.032C154.025 17.3547 154.409 18.4853 155.177 19.424C156.009 20.2133 157.012 20.608 158.185 20.608C159.358 20.608 160.361 20.2133 161.193 19.424C162.025 18.4853 162.441 17.3547 162.441 16.032C162.441 14.7093 162.025 13.6 161.193 12.704C160.276 11.8933 159.273 11.488 158.185 11.488C157.097 11.488 156.094 11.8933 155.177 12.704ZM183.593 21.664C182.185 23.2853 180.404 24.096 178.249 24.096C176.094 24.096 174.27 23.3067 172.777 21.728C171.284 20.1493 170.537 18.2613 170.537 16.064C170.537 13.8667 171.284 11.9787 172.777 10.4C174.292 8.8 176.105 8 178.217 8C180.329 8 182.121 8.81067 183.593 10.432C185.086 12.032 185.833 13.9413 185.833 16.16C185.833 18.3787 185.086 20.2133 183.593 21.664ZM175.177 12.704C174.409 13.6 174.025 14.7093 174.025 16.032C174.025 17.3547 174.409 18.4853 175.177 19.424C176.009 20.2133 177.012 20.608 178.185 20.608C179.358 20.608 180.361 20.2133 181.193 19.424C182.025 18.4853 182.441 17.3547 182.441 16.032C182.441 14.7093 182.025 13.6 181.193 12.704C180.276 11.8933 179.273 11.488 178.185 11.488C177.097 11.488 176.094 11.8933 175.177 12.704ZM194.729 22.304C194.729 22.7733 194.548 23.1787 194.185 23.52C193.822 23.84 193.406 24 192.937 24C192.489 24 192.094 23.84 191.753 23.52C191.433 23.1787 191.273 22.7733 191.273 22.304V9.696C191.273 9.22667 191.433 8.832 191.753 8.512C192.094 8.17067 192.5 8 192.969 8C193.694 8 194.217 8.33067 194.537 8.992C195.582 8.33067 196.713 8 197.929 8C199.785 8 201.364 8.66133 202.665 9.984C203.966 11.2853 204.617 12.8427 204.617 14.656V22.304C204.617 22.7733 204.457 23.1787 204.137 23.52C203.817 23.84 203.422 24 202.953 24C202.505 24 202.11 23.84 201.769 23.52C201.428 23.1787 201.257 22.7733 201.257 22.304V14.656C201.257 13.76 200.926 13.0027 200.265 12.384C199.625 11.744 198.846 11.424 197.929 11.424C197.033 11.424 196.276 11.744 195.657 12.384C195.038 13.0027 194.729 13.76 194.729 14.656V22.304Z"
            fill="currentColor"
          />
        </svg>
      ) : (
        <ImgInner>
          <Img {...ImgProps} />
          {actions && (
            <Overlay>
              {actions.map(({ label, ...buttonProps }, key) => (
                <Button {...buttonProps} key={key}>
                  {label}
                </Button>
              ))}
            </Overlay>
          )}
        </ImgInner>
      )}
    </ImgWrapper>

    <Title {...TitleProps}>{title}</Title>
  </Wrapper>
);

Preview.propTypes = {
  /**
   * Title below image
   */
  title: PropTypes.node.isRequired,
  /**
   * Should show NEW badge
   */
  isNew: PropTypes.bool,
  /**
   * Should show COMING badge
   */
  isComing: PropTypes.bool,
  /**
   * Use placeholder instead of image
   */
  placeholder: PropTypes.bool,
  /**
   * Props of img props
   */
  ImgProps: PropTypes.object,
  /**
   * Props of wrapper of img props
   */
  ImgWrapperProps: PropTypes.object,
  /**
   * Title text props
   */
  TitleProps: PropTypes.object,
  /**
   * List of actions on overlay
   */
  actions: PropTypes.arrayOf(
    PropTypes.shape({
      label: PropTypes.node,
    }),
  ),
};

export default Preview;
